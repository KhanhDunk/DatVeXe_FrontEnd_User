<main>
  <section class="slider-container">
    <div class="slides">
      <div class="slide fade" *ngFor="let s of slides; let i = index" [class.active]="slide() === i"
        [style.background-image]="'url(' + s.image + ')'">
        <div class="slide-caption">
          <h2>{{ s.title }}</h2>
          <p>{{ s.description }}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SEARCH BOX -->
  <div class="search-overlay-box enhanced">
    <div class="search-box">
      <h2>Đặt vé nhanh chóng</h2>

      <form class="search-form">
        <div class="input-group">
          <label>Điểm đi</label>
          <input type="text" placeholder="Chọn điểm khởi hành">
        </div>

        <div class="input-group">
          <label>Điểm đến</label>
          <input type="text" placeholder="Chọn điểm đến">
        </div>

        <div class="input-group">
          <label>Ngày đi</label>
          <input type="date">
        </div>

        <button class="btn-search">Tìm chuyến xe</button>
      </form>
    </div>
  </div>

  <div class="section-white mt-10">
    <div class="promote-section mt-10">
      <h2 class="text-2xl font-bold mb-4 text-center">DỊCH VỤ NỔI BẬT</h2>

      <div
        class="promo-slider"
        (pointerdown)="onSwipeStart($event, 'promo')"
        (pointermove)="onSwipeMove($event)"
        (pointerup)="onSwipeEnd($event)"
        (pointercancel)="onSwipeEnd($event)"
      >
        <div class="promo-track" [style.transform]="'translateX(-' + (promoIndex * 100) + '%)'">
          <div class="promo-page" *ngFor="let page of promotionPages()">
            <div class="promo-card" *ngFor="let item of page">
              <img [src]="item.image" alt="Dịch vụ" (error)="onCardImageError($event)" />
              <h3>{{ item.title }}</h3>
              <p>{{ item.description }}</p>
            </div>
          </div>
        </div>
      </div>
  

    <!-- BUTTON TRÒN BÊN DƯỚI -->
    <div class="promo-dots">
      <div class="dot" *ngFor="let p of promotionPages(); let i = index" [class.active]="i === promoIndex"
        (click)="goToSlide(i)">
      </div>
    </div>
  </div>
  </div>


  <div class="section-gray mt-10">  
  <div class="route-section mt-14">
    <h2 class="text-2xl font-bold mb-4 text-center">TUYẾN PHỔ BIẾN</h2>

    <div
      class="route-slider"
      (pointerdown)="onSwipeStart($event, 'route')"
      (pointermove)="onSwipeMove($event)"
      (pointerup)="onSwipeEnd($event)"
      (pointercancel)="onSwipeEnd($event)"
    >
      <div class="route-track" [style.transform]="'translateX(-' + (routeIndex * 100) + '%)'">
        <div class="route-page" *ngFor="let page of routePages()">
          <div class="route-card" *ngFor="let item of page">
            <img [src]="item.image" alt="Tuyến xe" (error)="onCardImageError($event)">
            <h3>{{ item.name }}</h3>
            <p>{{ item.description }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- DOTS -->
    <div class="route-dots">
      <div *ngFor="let r of routePages(); let i = index" class="dot" [class.active]="i === routeIndex"
        (click)="goToRoute(i)">
      </div>
    </div>
  </div>
  </div>


  <div class="intro-banner mt-16">
    <div class="intro-content">
      <h2>DŨNG CÚC AUTO – An tâm di chuyển, hưởng trọn hành trình</h2>
      <p>
        Dịch vụ xe khách tuyến cố định chất lượng cao, ưu tiên an toàn – uy tín – trải nghiệm khách hàng.
        Lịch trình rõ ràng – đúng tuyến – đúng giờ.
      </p>

      <button class="intro-button" routerLink="/dat-ve">
        Đặt vé ngay
      </button>
    </div>

    <div class="intro-image">
      <img src="/Assets/images/anhxe1.jpg" loading="lazy" alt="Xe khách" (error)="onCardImageError($event)">
    </div>
  </div>


  <div class="intro-banner mt-24">
    <div class="intro-content">
      <h2>Khuyến mãi dành cho hành khách</h2>
      <p>
        Tổng hợp ưu đãi đang áp dụng (hiển thị demo). Xem chi tiết để chọn chương trình phù hợp trước khi đặt vé.
      </p>

      <button class="intro-button" routerLink="/khuyen-mai">
        Xem khuyến mãi
      </button>
    </div>

    <div class="intro-image">
      <img src="/Assets/images/anhxe2.jpg" loading="lazy" alt="Khuyến mãi" (error)="onCardImageError($event)">
    </div>
  </div>


  <div class="news-section mt-16">
    <h2 class="text-2xl font-bold mb-4 text-center">TIN TỨC MỚI NHẤT</h2>

    <div
      class="news-slider"
      (pointerdown)="onSwipeStart($event, 'news')"
      (pointermove)="onSwipeMove($event)"
      (pointerup)="onSwipeEnd($event)"
      (pointercancel)="onSwipeEnd($event)"
    >

      <div class="news-track" [style.transform]="'translateX(-' + (newsIndex * 100) + '%)'">
        <div class="news-page" *ngFor="let page of newsPages()">
          <div class="news-card" *ngFor="let item of page">
            <img [src]="item.image" alt="Tin tức" (error)="onCardImageError($event)" />
            <h3>{{ item.title }}</h3>
            <p>{{ item.short }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- DOTS -->
    <div class="news-dots">
      <div class="dot" *ngFor="let n of newsPages(); let i = index" [class.active]="i === newsIndex" (click)="goToNews(i)">
      </div>
    </div>
  </div>


</main>